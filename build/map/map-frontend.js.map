{"version":3,"file":"map/map-frontend.js","mappings":"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","sources":["webpack://sunflower-map-points/external window [\"wp\",\"i18n\"]","webpack://sunflower-map-points/webpack/bootstrap","webpack://sunflower-map-points/webpack/runtime/compat get default export","webpack://sunflower-map-points/webpack/runtime/define property getters","webpack://sunflower-map-points/webpack/runtime/hasOwnProperty shorthand","webpack://sunflower-map-points/webpack/runtime/make namespace object","webpack://sunflower-map-points/./src/map/map-frontend.js"],"sourcesContent":["module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* global L */\n/* global MutationObserver */\n/* global sunflowerMapPoints */\n/* global bootstrap */\n\n/**\n * Retrieves the translation of text.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/packages/packages-i18n/\n */\nimport { __ } from '@wordpress/i18n';\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tconst observer = new MutationObserver( () => {\n\t\tdocument.querySelectorAll( '.map-container' ).forEach( ( el ) => {\n\t\t\tif ( typeof L === 'undefined' ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( __( 'Leaflet is not available', 'sunflower-map-points-map' ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mapEl = el.querySelector( '#map' );\n\n\t\t\tif ( ! mapEl ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( mapEl && mapEl._leaflet_id ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst initLat = parseFloat( el.dataset.lat );\n\t\t\tconst initLng = parseFloat( el.dataset.lng );\n\t\t\tconst initZoom = parseInt( el.dataset.zoom, 10 );\n\n\t\t\tconst map = L.map( mapEl, {\n\t\t\t\tscrollWheelZoom: true,\n\t\t\t\tdragging: true,\n\t\t\t\tfullscreenControl: true,\n\t\t\t} ).setView( [ initLat, initLng ], initZoom );\n\n\t\t\tmapEl._leafletMap = map;\n\n\t\t\t// Custom \"Locate Me\" Control\n\t\t\tL.Control.LocateControl = L.Control.extend( {\n\t\t\t\tonAdd() {\n\t\t\t\t\tconst container = L.DomUtil.create(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t'leaflet-bar leaflet-control leaflet-control-custom'\n\t\t\t\t\t);\n\n\t\t\t\t\tcontainer.innerHTML =\n\t\t\t\t\t\t'<i class=\"fa-solid fa-location-crosshairs\"></i>';\n\t\t\t\t\tcontainer.style.backgroundColor = 'white';\n\t\t\t\t\tcontainer.style.width = '34px';\n\t\t\t\t\tcontainer.style.height = '34px';\n\t\t\t\t\tcontainer.style.display = 'flex';\n\t\t\t\t\tcontainer.style.alignItems = 'center';\n\t\t\t\t\tcontainer.style.justifyContent = 'center';\n\t\t\t\t\tcontainer.style.cursor = 'pointer';\n\n\t\t\t\t\tcontainer.onclick = function () {\n\t\t\t\t\t\tmap.locate( { setView: true, maxZoom: 15 } );\n\t\t\t\t\t};\n\n\t\t\t\t\t// Mausinteraktion auf der Karte nicht blockieren\n\t\t\t\t\tL.DomEvent.disableClickPropagation( container );\n\n\t\t\t\t\treturn container;\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\tL.tileLayer( 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap contributors</a>',\n\t\t\t} ).addTo( map );\n\n\t\t\tmap.addControl(\n\t\t\t\tnew L.Control.LocateControl( { position: 'topright' } )\n\t\t\t);\n\n\t\t\tmap.on( 'locationfound', function ( e ) {\n\t\t\t\tconst marker = L.marker( e.latlng )\n\t\t\t\t\t.addTo( map )\n\t\t\t\t\t.bindPopup(__( 'Your are here!', 'sunflower-map-points-map' ) )\n\t\t\t\t\t.openPopup();\n\n\t\t\t\tL.circle( e.latlng, {\n\t\t\t\t\tradius: e.accuracy,\n\t\t\t\t\tcolor: '#136aec',\n\t\t\t\t\tfillColor: '#136aec',\n\t\t\t\t\tfillOpacity: 0.2,\n\t\t\t\t} ).addTo( map );\n\n\t\t\t\t// Remove marker of current location after 2 seconds\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tmap.removeLayer( marker );\n\t\t\t\t}, 2000 );\n\t\t\t} );\n\n\t\t\tmap.on( 'locationerror', function ( e ) {\n\t\t\t\t// eslint-disable-next-line no-alert, no-undef\n\t\t\t\talert( __( 'Your location couldn\\'t be found.', 'sunflower-map-points-map' ) + '\\n' + e.message );\n\t\t\t} );\n\n\t\t\tlet lastLat = null;\n\t\t\tlet lastLng = null;\n\n\t\t\tmap.on( 'click', function ( e ) {\n\t\t\t\tlastLat = e.latlng.lat.toFixed( 6 );\n\t\t\t\tlastLng = e.latlng.lng.toFixed( 6 );\n\n\t\t\t\t// marker icon\n\t\t\t\tconst customIcon = L.icon( {\n\t\t\t\t\ticonUrl: sunflowerMapPoints.maps_marker,\n\t\t\t\t\ticonSize: [ 25, 41 ],\n\t\t\t\t\ticonAnchor: [ 12, 41 ],\n\t\t\t\t\tpopupAnchor: [ 0, -25 ],\n\t\t\t\t} );\n\n\t\t\t\t// remove old marker icon\n\t\t\t\tif ( map._marker ) {\n\t\t\t\t\tmap.removeLayer( map._marker );\n\t\t\t\t}\n\n\t\t\t\t// set new marker\n\t\t\t\tmap._marker = L.marker( [ lastLat, lastLng ], {\n\t\t\t\t\ticon: customIcon,\n\t\t\t\t} ).addTo( map );\n\n\t\t\t\t// write location to modal form input fields\n\t\t\t\tdocument.querySelector( '#form-lat' ).value = lastLat;\n\t\t\t\tdocument.querySelector( '#form-lng' ).value = lastLng;\n\n\t\t\t\t// show modal\n\t\t\t\tif (\n\t\t\t\t\ttypeof bootstrap !== 'undefined' &&\n\t\t\t\t\ttypeof bootstrap.Modal === 'function'\n\t\t\t\t) {\n\t\t\t\t\tconst modal = new bootstrap.Modal(\n\t\t\t\t\t\tdocument.getElementById( 'leafletModal' )\n\t\t\t\t\t);\n\t\t\t\t\tmodal.show();\n\t\t\t\t} else {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( __( 'Bootstrap is not available', 'sunflower-map-points-map' ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\tconst modalEl = document.getElementById( 'leafletModal' );\n\t\tif ( modalEl ) {\n\t\t\tmodalEl.addEventListener( 'shown.bs.modal', () => {\n\t\t\t\tconst form = document.getElementById( 'leaflet-form' );\n\n\t\t\t\tif ( ! form || form.dataset.handlerAttached === 'true' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Mini map on top of modal form\n\t\t\t\tconst miniMapEl = document.getElementById( 'mini-map' );\n\t\t\t\tif ( miniMapEl ) {\n\t\t\t\t\tconst lat = parseFloat(\n\t\t\t\t\t\tdocument.querySelector( '#form-lat' ).value\n\t\t\t\t\t);\n\t\t\t\t\tconst lng = parseFloat(\n\t\t\t\t\t\tdocument.querySelector( '#form-lng' ).value\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( ! window.miniMap ) {\n\t\t\t\t\t\twindow.miniMap = L.map( miniMapEl, {\n\t\t\t\t\t\t\tcenter: [ lat, lng ],\n\t\t\t\t\t\t\tzoom: 17,\n\t\t\t\t\t\t\tdragging: false,\n\t\t\t\t\t\t\tscrollWheelZoom: false,\n\t\t\t\t\t\t\tzoomControl: false,\n\t\t\t\t\t\t\tattributionControl: false,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tL.tileLayer(\n\t\t\t\t\t\t\t'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmaxZoom: 19,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).addTo( window.miniMap );\n\n\t\t\t\t\t\tconst customIcon = L.icon( {\n\t\t\t\t\t\t\ticonUrl: sunflowerMapPoints.maps_marker,\n\t\t\t\t\t\t\ticonSize: [ 25, 41 ],\n\t\t\t\t\t\t\ticonAnchor: [ 12, 41 ],\n\t\t\t\t\t\t\tpopupAnchor: [ 0, -25 ],\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\twindow.miniMarker = L.marker( [ lat, lng ], {\n\t\t\t\t\t\t\ticon: customIcon,\n\t\t\t\t\t\t} ).addTo( window.miniMap );\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.miniMap.setView( [ lat, lng ] );\n\t\t\t\t\t\tif ( window.miniMarker ) {\n\t\t\t\t\t\t\twindow.miniMap.removeLayer( window.miniMarker );\n\t\t\t\t\t\t}\n\t\t\t\t\t\twindow.miniMarker = L.marker( [ lat, lng ] ).addTo(\n\t\t\t\t\t\t\twindow.miniMap\n\t\t\t\t\t\t);\n\t\t\t\t\t\twindow.miniMap.invalidateSize();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst mapEl = document.querySelector( '#map' );\n\t\t\t\tconst map = mapEl?._leafletMap;\n\n\t\t\t\tlet isSubmitting = false;\n\n\t\t\t\t// register only once\n\t\t\t\tif (!form.dataset.listenerBound) {\n\t\t\t\t\tform.addEventListener('submit', formSubmitHandler);\n\t\t\t\t\tform.dataset.listenerBound = 'true';\n\t\t\t\t}\n\n\t\t\t\tfunction formSubmitHandler ( e ) {\n\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (isSubmitting) {\n\t\t\t\t\t\treturn; // block further submits\n\t\t\t\t\t}\n\n\t\t\t\t\tisSubmitting = true;\n\n\t\t\t\t\tconst button = form.querySelector('button[type=\"submit\"]');\n\t\t\t\t\tbutton.disabled = true;\n\t\t\t\t\tbutton.style.opacity = 0.5;\n\n\n\t\t\t\t\tconst formData = new FormData( form );\n\t\t\t\t\tconst messageBox =\n\t\t\t\t\t\tdocument.getElementById( 'form-message' );\n\n\t\t\t\t\t// Reset message box\n\t\t\t\t\tmessageBox.classList.add( 'd-none', 'alert' );\n\t\t\t\t\tmessageBox.classList.remove(\n\t\t\t\t\t\t'alert-success',\n\t\t\t\t\t\t'alert-danger'\n\t\t\t\t\t);\n\t\t\t\t\tmessageBox.textContent = '';\n\n\t\t\t\t\tfetch( sunflowerMapPoints.ajaxurl, {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tcredentials: 'same-origin',\n\t\t\t\t\t\tbody: formData,\n\t\t\t\t\t} )\n\t\t\t\t\t\t.then( ( response ) => response.json() )\n\t\t\t\t\t\t.then( ( data ) => {\n\t\t\t\t\t\t\tif ( data.success ) {\n\t\t\t\t\t\t\t\tform.classList.add( 'd-none' );\n\t\t\t\t\t\t\t\tform.reset();\n\n\t\t\t\t\t\t\t\tmessageBox.innerHTML = data?.messageafter;\n\t\t\t\t\t\t\t\tmessageBox.classList.remove( 'd-none' );\n\t\t\t\t\t\t\t\tmessageBox.classList.add(\n\t\t\t\t\t\t\t\t\t'alert',\n\t\t\t\t\t\t\t\t\t'alert-success'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\t\t\tif ( modalEl ) {\n\t\t\t\t\t\t\t\t\t\tconst modal =\n\t\t\t\t\t\t\t\t\t\t\tbootstrap.Modal.getInstance(\n\t\t\t\t\t\t\t\t\t\t\t\tmodalEl\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tmodal?.hide();\n\t\t\t\t\t\t\t\t\t\tmessageBox.classList.add( 'd-none' );\n\t\t\t\t\t\t\t\t\t\tmessageBox.textContent = '';\n\t\t\t\t\t\t\t\t\t\tform.classList.remove( 'd-none' );\n\n\t\t\t\t\t\t\t\t\t\t// remove marker\n\t\t\t\t\t\t\t\t\t\tif ( map?._marker ) {\n\t\t\t\t\t\t\t\t\t\t\tmap.removeLayer( map._marker );\n\t\t\t\t\t\t\t\t\t\t\tmap._marker = null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tisSubmitting = false;\n\t\t\t\t\t\t\t\t}, 5000 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmessageBox.textContent =\n\t\t\t\t\t\t\t\t\tdata?.messageafter ||\n\t\t\t\t\t\t\t\t\t __( 'An error occured!', 'sunflower-map-points-map' );\n\t\t\t\t\t\t\t\tmessageBox.classList.remove( 'd-none' );\n\t\t\t\t\t\t\t\tisSubmitting = false;\n\t\t\t\t\t\t\t\tbutton.disabled = false;\n\t\t\t\t\t\t\t\tbutton.style.opacity = 1;\n\t\t\t\t\t\t\t\tmessageBox.classList.add(\n\t\t\t\t\t\t\t\t\t'alert',\n\t\t\t\t\t\t\t\t\t'alert-danger'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.catch( () => {\n\t\t\t\t\t\t\tmessageBox.textContent =\n\t\t\t\t\t\t\t\t__( 'Error on transmitting the form data.', 'sunflower-map-points-map' );\n\t\t\t\t\t\t\tmessageBox.classList.remove( 'd-none' );\n\t\t\t\t\t\t\tmessageBox.classList.add( 'alert', 'alert-danger' );\n\t\t\t\t\t\t\tisSubmitting = false;\n\t\t\t\t\t\t\tbutton.disabled = false;\n\t\t\t\t\t\t\tbutton.style.opacity = 1;\n\t\t\t\t\t\t} );\n\t\t\t\t};\n\n\t\t\t\t// Markiere, dass der Handler schon gesetzt wurde\n\t\t\t\tform.dataset.handlerAttached = 'true';\n\t\t\t} );\n\n\t\t\tmodalEl.addEventListener( 'hidden.bs.modal', () => {\n\t\t\t\tconst form = document.getElementById( 'leaflet-form' );\n\t\t\t\tform.dataset.handlerAttached = 'false';\n\t\t\t\tform.reset();\n\n\t\t\t\t// re-enable the submit button to allow multiple, different submits\n\t\t\t\tconst button = form.querySelector('button[type=\"submit\"]');\n\t\t\t\tbutton.disabled = false;\n\t\t\t\tbutton.style.opacity = 1;\n\n\t\t\t\tif ( window.miniMap ) {\n\t\t\t\t\twindow.miniMap.remove();\n\t\t\t\t\twindow.miniMap = null;\n\t\t\t\t\twindow.miniMarker = null;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n\tobserver.observe( document.body, { childList: true, subtree: true } );\n} );\n"],"names":["__","document","addEventListener","observer","MutationObserver","querySelectorAll","forEach","el","L","console","error","mapEl","querySelector","_leaflet_id","initLat","parseFloat","dataset","lat","initLng","lng","initZoom","parseInt","zoom","map","scrollWheelZoom","dragging","fullscreenControl","setView","_leafletMap","Control","LocateControl","extend","onAdd","container","DomUtil","create","innerHTML","style","backgroundColor","width","height","display","alignItems","justifyContent","cursor","onclick","locate","maxZoom","DomEvent","disableClickPropagation","tileLayer","attribution","addTo","addControl","position","on","e","marker","latlng","bindPopup","openPopup","circle","radius","accuracy","color","fillColor","fillOpacity","setTimeout","removeLayer","alert","message","lastLat","lastLng","toFixed","customIcon","icon","iconUrl","sunflowerMapPoints","maps_marker","iconSize","iconAnchor","popupAnchor","_marker","value","bootstrap","Modal","modal","getElementById","show","log","modalEl","form","handlerAttached","miniMapEl","window","miniMap","center","zoomControl","attributionControl","miniMarker","invalidateSize","isSubmitting","listenerBound","formSubmitHandler","preventDefault","button","disabled","opacity","formData","FormData","messageBox","classList","add","remove","textContent","fetch","ajaxurl","method","credentials","body","then","response","json","data","success","reset","messageafter","getInstance","hide","catch","observe","childList","subtree"],"sourceRoot":""}