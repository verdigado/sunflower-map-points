(()=>{"use strict";var e,o={246:()=>{const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.blockEditor,n=window.wp.components,l=window.wp.element,a=window.ReactJSXRuntime,r=JSON.parse('{"UU":"sunflower-map-points/map"}');(0,e.registerBlockType)(r.UU,{edit:function({attributes:e,setAttributes:r}){const{lat:i,lng:s,zoom:p,height:c,mailTo:m}=e,u=(0,l.useRef)(null),d=(0,l.useRef)(null),f=(0,t.useBlockProps)({className:"row"});return(0,l.useLayoutEffect)(()=>{if("undefined"==typeof L)return void console.error((0,o.__)("Leaflet is not available","sunflower-map-points-map"));if(!u.current||d.current)return;const t=L.map(u.current,{scrollWheelZoom:!0,dragging:!0,fullscreenControl:!0}).setView([e.lat,e.lng],e.zoom);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors",maxZoom:18}).addTo(t),L.Control.LocateControl=L.Control.extend({onAdd(){const e=L.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom");return e.innerHTML='<i class="fa-solid fa-location-crosshairs"></i>',e.style.backgroundColor="white",e.style.width="34px",e.style.height="34px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.cursor="pointer",e.onclick=function(){t.locate({setView:!0,maxZoom:15})},L.DomEvent.disableClickPropagation(e),e}}),t.addControl(new L.Control.LocateControl({position:"topright"})),t.on("locationfound",function(e){L.marker(e.latlng).addTo(t).bindPopup((0,o.__)("Your are here!","sunflower-map-points-map")).openPopup(),L.circle(e.latlng,{radius:e.accuracy,color:"#136aec",fillColor:"#136aec",fillOpacity:.2}).addTo(t)}),t.on("locationerror",function(e){alert((0,o.__)("Your location couldn't be found.","sunflower-map-points-map")+"\n"+e.message)}),t.on("click",function(e){const{lat:o,lng:n}=e.latlng,l=L.icon({iconUrl:sunflowerMapPoints.maps_marker,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-25]});t._marker&&t.removeLayer(t._marker),t._marker=L.marker([o,n],{icon:l}).addTo(t),t.setView([o,n],t.getZoom()),t.dragging.disable(),t.dragging.enable(),r({lat:parseFloat(o.toFixed(6)),lng:parseFloat(n.toFixed(6))})}),t.on("zoomend",function(){const e=t.getZoom();r({zoom:e})}),d.current=t},[e.lat,e.lng,e.zoom,r]),(0,l.useEffect)(()=>{const o=d.current;o&&"function"==typeof o.setZoom&&o.setZoom(e.zoom)},[e.zoom]),(0,a.jsxs)("div",{...f,children:[(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"map-container",style:{height:`${e.height||400}px`},children:(0,a.jsx)("div",{ref:u,style:{width:"100%",height:"100%"},id:"leaflet-editor-map"})})}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(t.InspectorControls,{children:(0,a.jsxs)(n.PanelBody,{title:(0,o.__)("Map Settings","sunflower-map-points-map"),children:[(0,a.jsx)("p",{className:"components-base-control__help",children:(0,o.__)("Click into the map and move to the right position. The position and zoom level will be used in the map settings.","sunflower-map-points-map")}),(0,a.jsx)(n.TextControl,{label:(0,o.__)("Latitude","sunflower-map-points-map"),value:i,onChange:e=>r({lat:parseFloat(e)})}),(0,a.jsx)(n.TextControl,{label:(0,o.__)("Longitude","sunflower-map-points-map"),value:s,onChange:e=>r({lng:parseFloat(e)})}),(0,a.jsx)(n.RangeControl,{label:(0,o.__)("Zoom","sunflower-map-points-map"),value:p,onChange:e=>r({zoom:e}),min:1,max:18}),(0,a.jsx)(n.__experimentalNumberControl,{label:(0,o.__)("Height","sunflower-map-points-map"),value:c,onChange:e=>{const o=parseInt(e);o>=100&&o<=1e3&&r({height:o})},min:100,max:1e3}),(0,a.jsx)(n.TextControl,{label:(0,o.__)("Mail To","sunflower-map-points-map"),help:(0,o.__)("Mail form to this address instead of default receiver.","sunflower-map-points-map"),value:m,placeholder:(0,o.__)("default receiver","sunflower-map-points-map"),type:"email",onChange:e=>{r({mailTo:void 0===e?"":e})}})]})})})]})},save:()=>null})}},t={};function n(e){var l=t[e];if(void 0!==l)return l.exports;var a=t[e]={exports:{}};return o[e](a,a.exports,n),a.exports}n.m=o,e=[],n.O=(o,t,l,a)=>{if(!t){var r=1/0;for(c=0;c<e.length;c++){for(var[t,l,a]=e[c],i=!0,s=0;s<t.length;s++)(!1&a||r>=a)&&Object.keys(n.O).every(e=>n.O[e](t[s]))?t.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var p=l();void 0!==p&&(o=p)}}return o}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,l,a]},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={338:0,406:0};n.O.j=o=>0===e[o];var o=(o,t)=>{var l,a,[r,i,s]=t,p=0;if(r.some(o=>0!==e[o])){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var c=s(n)}for(o&&o(t);p<r.length;p++)a=r[p],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},t=globalThis.webpackChunksunflower_map_points=globalThis.webpackChunksunflower_map_points||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var l=n.O(void 0,[406],()=>n(246));l=n.O(l)})();